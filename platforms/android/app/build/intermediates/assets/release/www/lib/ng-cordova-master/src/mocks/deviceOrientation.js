ngCordovaMocks.factory("$cordovaDeviceOrientation",["$interval","$q",function($interval,$q){var watchIntervals=[];return{currentHeading:null,throwsError:!1,readings:[],watchIntervals:watchIntervals,getCurrentHeading:function(){var defer=$q.defer();return this.throwsError?defer.reject("There was an error getting the current heading."):defer.resolve(this.currentHeading),defer.promise},watchHeading:function(options){var defer=$q.defer(),watchID=Math.floor(1e6*Math.random()+1),self=this;if(self.readings=[],self.throwsError)defer.reject("There was an error getting the compass heading.");else{var delay=100;options&&options.frequency&&(delay=options.frequency),self.watchIntervals.push({watchID:watchID,interval:$interval(function(){self.throwsError&&defer.reject("There was an error watching the acceleration.");var result={magneticHeading:359.99*Math.random()+1,trueHeading:359.99*Math.random()+1,headingAccuracy:Math.floor(360*Math.random()+1),timestamp:Date.now()};self.readings.push(result),defer.notify(result)},delay)})}var cancel=function(id){for(var removed=-1,i=0;i<self.watchIntervals.length;i++)if(self.watchIntervals[i].watchID===id){$interval.cancel(watchIntervals[i].interval),removed=i;break}-1!==removed&&self.watchIntervals.splice(removed,1)};return defer.promise.cancel=function(){cancel(watchID)},defer.promise.clearWatch=function(id){cancel(id||watchID)},defer.promise.watchID=watchID,defer.promise},clearWatch:function(watchId){var defer=$q.defer();if(watchId)if(this.throwsError)defer.reject("Unable to clear watch.");else{for(var removed=-1,i=0;i<this.watchIntervals.length;i++)if(this.watchIntervals[i].watchId===watchId){$interval.cancel(watchIntervals[i].interval),removed=i;break}-1!==removed&&this.watchIntervals.splice(removed,1)}else defer.reject("Unable to clear watch. No watch ID provided.");return defer.promise}}}]);